<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hội thi ATVSV giỏi - 2025</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.7.0/p5.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@400;500;600;700&family=Roboto+Condensed:wght@400;700&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: 'Inter', Arial, sans-serif;
            overflow: hidden;
        }
        #p5-container {
            width: 100vw;
            height: 100vh;
        }
    </style>
</head>
<body>
    <div id="p5-container"></div>
    <script>
        let rotationAngle = 0;
        let animationPhase = 0;
        let maxPhase = 6;
        let phaseTimer = 0;
        let phaseDuration = 80;
        let images = [];
        let currentImageIndex = 0;
        let imageTimer = 0;
        let imageDuration = 180; // 3 seconds at 60fps
        let imageLoadCount = 0;
        let totalImagesToLoad = 5;
          // Animation states
        let logoOpacity = 0;
        let mainTitleOpacity = 0;
        let companyOpacity = 0;
        let dateOpacity = 0;
        let venueOpacity = 0;
        let geometryOpacity = 0;
        
        // Floating elements
        let floatingDots = [];
        let decorativeShapes = [];
        
        // Pre-created mask to avoid memory leaks
        let circleMask;
        
        function preload() {
            // Load specific images that exist
            let imageFiles = [
                'images/index_images/1.jpg',
                'images/index_images/2.png',
                'images/index_images/3.jpg',
                'images/index_images/5.jpg',
                'images/index_images/6.jpg',
                'images/index_images/8.jpg',
                'images/index_images/9.jpg'

            ];
            
            imageFiles.forEach((imgPath, index) => {
                loadImage(imgPath, 
                    (img) => { 
                        images.push(img);
                        imageLoadCount++;
                        console.log(`Loaded image ${index + 1}: ${imgPath}`);
                    },                    (error) => { 
                        console.log(`Failed to load: ${imgPath}`);
                        // Skip failed loads instead of creating graphics objects
                        imageLoadCount++;
                    }
                );
            });
        }
        
        function setup() {
            let canvas = createCanvas(1920, 1080);
            canvas.parent('p5-container');
            
            // Initialize floating elements
            for (let i = 0; i < 20; i++) {
                floatingDots.push({
                    x: random(width),
                    y: random(height),
                    size: random(3, 8),
                    speed: random(0.5, 2),
                    direction: random(TWO_PI)
                });
            }
            
            for (let i = 0; i < 10; i++) {
                decorativeShapes.push({
                    x: random(width),
                    y: random(height),
                    size: random(20, 60),
                    rotation: 0,
                    rotSpeed: random(-0.02, 0.02)
                });            }
            
            // Wait a bit for images to load
            setTimeout(() => {
                console.log(`Loaded ${images.length} images`);
                if (images.length === 0) {
                    // Create default placeholder if no images loaded
                    let defaultImg = createGraphics(400, 300);
                    defaultImg.background(220);
                    defaultImg.fill(100);
                    defaultImg.textAlign(CENTER, CENTER);
                    defaultImg.textSize(24);
                    defaultImg.text('No Images Found', 200, 150);
                    images.push(defaultImg);
                }
                
                // Create circle mask once to avoid memory leaks
                circleMask = createGraphics(370, 370);
                circleMask.fill(255);
                circleMask.noStroke();
                circleMask.ellipse(185, 185, 370, 370);
            }, 1000);
        }
        
        function draw() {
            // Create subtle gradient background similar to the image
            for (let i = 0; i <= height; i++) {
                let inter = map(i, 0, height, 0, 1);
                let c = lerpColor(color(248, 248, 252), color(240, 242, 250), inter);
                stroke(c);
                line(0, i, width, i);
            }
            
            rotationAngle += 0.01;
            phaseTimer++;
            
            // Update animation phases
            if (phaseTimer > phaseDuration && animationPhase < maxPhase) {
                animationPhase++;
                phaseTimer = 0;
            }
            
            // Update opacity values based on phase
            updateOpacities();
            
            // Draw animated geometric elements
            drawGeometricElements();
            
            // Draw floating decorative elements
            drawFloatingElements();
            
            // Draw main content
            drawContent();
            
            // Update image slideshow timer
            imageTimer++;
            if (imageTimer >= imageDuration && images.length > 1) {
                currentImageIndex = (currentImageIndex + 1) % images.length;
                imageTimer = 0;
            }
        }
        
        function updateOpacities() {
            let fadeSpeed = 8;
            
            // Phase 0: Geometric elements appear
            if (animationPhase >= 0) {
                geometryOpacity = min(255, geometryOpacity + fadeSpeed);
            }
            
            // Phase 1: Logo appears
            if (animationPhase >= 1) {
                logoOpacity = min(255, logoOpacity + fadeSpeed);
            }
            
            // Phase 2: Main title appears
            if (animationPhase >= 2) {
                mainTitleOpacity = min(255, mainTitleOpacity + fadeSpeed);
            }
            
            // Phase 3: Company name appears
            if (animationPhase >= 3) {
                companyOpacity = min(255, companyOpacity + fadeSpeed);
            }
            
            // Phase 4: Date appears
            if (animationPhase >= 4) {
                dateOpacity = min(255, dateOpacity + fadeSpeed);
            }
            
            // Phase 5: Venue appears
            if (animationPhase >= 5) {
                venueOpacity = min(255, venueOpacity + fadeSpeed);
            }
        }
          function drawGeometricElements() {
            push();
            tint(255, geometryOpacity);
            
            // Main concentric circles with image - enlarged
            push();
            translate(280, height/2 + 30); // Dịch trái (350->280) và xuống (height/2-50 -> height/2+30)
            
            // Outer rotating ring - increased size
            push();
            rotate(rotationAngle);
            noFill();
            strokeWeight(45);
            stroke(255, 100, 50, geometryOpacity * 0.8);
            arc(0, 0, 580, 580, 0, PI * 1.5); // Tăng kích thước (500->580)
            pop();
            
            // Middle rotating ring - increased size
            push();
            rotate(-rotationAngle * 1.5);
            strokeWeight(35);
            stroke(255, 180, 50, geometryOpacity * 0.9);
            arc(0, 0, 460, 460, PI * 0.3, PI * 1.8); // Tăng kích thước (400->460)
            pop();            // Inner image circle with slideshow - enlarged
            if (images.length > 0 && circleMask) {
                push();
                let currentImg = images[currentImageIndex];
                
                // Only use images that are already loaded, avoid creating new graphics
                if (currentImg && currentImg.width && currentImg.height) {
                    // Create a temporary copy only when needed
                    let tempImg = currentImg.get();
                    tempImg.resize(370, 370);
                    tempImg.mask(circleMask);
                    
                    imageMode(CENTER);
                    image(tempImg, 0, 0, 370, 370);
                }
                
                pop();
            }
            
            // Inner rotating ring - increased size
            push();
            rotate(rotationAngle * 0.8);
            noFill();
            strokeWeight(10);
            stroke(255, 150, 0, geometryOpacity);
            ellipse(0, 0, 420, 420); // Tăng kích thước (360->420)
            pop();
            
            pop();
            
            // Floating red circles
            fill(255, 50, 50, geometryOpacity * 0.8);
            noStroke();
            ellipse(200, 150, 120, 120);
            ellipse(1700, 200, 80, 80);
            ellipse(1600, 800, 100, 100);
            ellipse(150, 900, 200, 200);
            
            // Yellow accent elements
            fill(255, 200, 0, geometryOpacity * 0.7);
            ellipse(950, 500, 150, 150);
            ellipse(1800, 600, 60, 60);
            
            // Dotted patterns
            drawDottedPattern(800, 550, geometryOpacity);
            drawDottedPattern(1650, 650, geometryOpacity);
            
            pop();
        }
        
        function drawDottedPattern(x, y, opacity) {
            fill(50, 50, 50, opacity * 0.6);
            noStroke();
            for (let i = 0; i < 5; i++) {
                for (let j = 0; j < 4; j++) {
                    ellipse(x + i * 12, y + j * 12, 4, 4);
                }
            }
        }
        
        function drawFloatingElements() {
            // Update and draw floating dots
            for (let dot of floatingDots) {
                dot.x += cos(dot.direction) * dot.speed;
                dot.y += sin(dot.direction) * dot.speed;
                
                // Wrap around screen
                if (dot.x < 0) dot.x = width;
                if (dot.x > width) dot.x = 0;
                if (dot.y < 0) dot.y = height;
                if (dot.y > height) dot.y = 0;
                
                fill(100, 100, 100, geometryOpacity * 0.3);
                noStroke();
                ellipse(dot.x, dot.y, dot.size, dot.size);
            }
            
            // Update and draw decorative shapes
            for (let shape of decorativeShapes) {
                shape.rotation += shape.rotSpeed;
                
                push();
                translate(shape.x, shape.y);
                rotate(shape.rotation);
                stroke(255, 150, 50, geometryOpacity * 0.2);
                strokeWeight(2);
                noFill();
                rect(-shape.size/2, -shape.size/2, shape.size, shape.size);
                pop();
            }
        }
        
        function drawContent() {
            // Logo/Company identifier (top left)
            // push();
            // fill(50, 50, 50, logoOpacity);
            // textAlign(LEFT, TOP);
            // textSize(22);
            // textStyle(BOLD);
            // textFont('Oswald');
            // text("THÁI NGUYÊN CHEMICAL", 60, 60);
            // pop();
            
            // Main title - prominently displayed
            push();
            fill(41, 84, 144, mainTitleOpacity); // Dark blue color from image
            textAlign(CENTER, CENTER);
            textSize(80);
            textStyle(BOLD);
            textFont('Oswald');
            let titleY = 150;
            text("HỘI THI AN TOÀN VỆ SINH VIÊN GIỎI", width/2, titleY);
            
            // Year highlight
            push();
            fill(255, 119, 51, mainTitleOpacity); // Orange color from image
            textSize(72);
            textStyle(BOLD);
            textFont('Oswald');
            text("NĂM 2025", width/2, titleY + 100);
            
            // Underline for year
            stroke(255, 119, 51, mainTitleOpacity);
            strokeWeight(4);
            line(width/2 - 120, titleY + 125, width/2 + 120, titleY + 125);
            pop();
            
            // Company name
            fill(41, 84, 144, companyOpacity);
            textSize(38);
            textStyle(BOLD);
            textFont('Roboto Condensed');
            text("CÔNG TY CÔNG NGHIỆP HÓA CHẤT MỎ THÁI NGUYÊN", width/2, titleY + 180);
            pop();
            
            // Information cards section - larger cards
            let cardY = height - 360; // Moved up to accommodate larger cards
            let card1X = width/2 - 380; // Wider spacing
            let card2X = width/2 + 50;
            let cardWidth = 380; // Increased width
            let cardHeight = 240; // Increased height
            
            // Time card (left) - larger
            push();
            // Card background with shadow effect
            fill(0, 0, 0, dateOpacity * 0.1);
            noStroke();
            rect(card1X + 5, cardY + 5, cardWidth, cardHeight, 20); // Shadow
            
            fill(255, 255, 255, dateOpacity * 0.95);
            stroke(220, 220, 220, dateOpacity);
            strokeWeight(1);
            rect(card1X, cardY, cardWidth, cardHeight, 20);
            
            // Calendar icon - slightly larger
            push();
            translate(card1X + cardWidth/2, cardY + 60);
            // Icon background
            fill(91, 152, 229, dateOpacity);
            noStroke();
            rect(-25, -20, 50, 40, 8);
            // Icon details
            fill(255, dateOpacity);
            rect(-20, -15, 40, 30, 3);
            fill(91, 152, 229, dateOpacity);
            rect(-17, -12, 8, 5);
            rect(-5, -12, 8, 5);
            rect(7, -12, 8, 5);
            rect(-17, -5, 8, 5);
            rect(-5, -5, 8, 5);
            rect(7, -5, 8, 5);
            pop();
            
            // Time card content
            fill(255, 119, 51, dateOpacity); // Orange for "THỜI GIAN"
            textAlign(CENTER, CENTER);
            textSize(28);
            textStyle(BOLD);
            textFont('Oswald');
            text("THỜI GIAN", card1X + cardWidth/2, cardY + 120);
            
            fill(80, 80, 80, dateOpacity);
            textSize(32);
            textStyle(BOLD);
            textFont('Inter');
            text("25/06/2025", card1X + cardWidth/2, cardY + 170);
            pop();
            
            // Location card (right) - larger
            push();
            // Card background with shadow effect
            fill(0, 0, 0, venueOpacity * 0.1);
            noStroke();
            rect(card2X + 5, cardY + 5, cardWidth, cardHeight, 20); // Shadow
            
            fill(255, 255, 255, venueOpacity * 0.95);
            stroke(220, 220, 220, venueOpacity);
            strokeWeight(1);
            rect(card2X, cardY, cardWidth, cardHeight, 20);
            
            // Location pin icon - slightly larger
            push();
            translate(card2X + cardWidth/2, cardY + 60);
            fill(229, 91, 152, venueOpacity); // Pink color for location
            noStroke();
            ellipse(0, 0, 35, 35);
            fill(255, venueOpacity);
            ellipse(0, -4, 15, 15);
            // Pin bottom
            fill(229, 91, 152, venueOpacity);
            triangle(-4, 12, 4, 12, 0, 22);
            pop();
            
            // Location card content
            fill(255, 119, 51, venueOpacity); // Orange for "ĐỊA ĐIỂM"
            textAlign(CENTER, CENTER);
            textSize(28);
            textStyle(BOLD);
            textFont('Oswald');
            text("ĐỊA ĐIỂM", card2X + cardWidth/2, cardY + 120);
            
            fill(80, 80, 80, venueOpacity);
            textAlign(CENTER, TOP);
            textSize(18); // Increased font size for better readability
            textStyle(NORMAL);
            textFont('Inter');
            let venueLines = [
                "Hội trường tầng 5 - Văn phòng Công ty",
                "Số 9A, Đường Phan Đình Phùng",
                "Phường Đồng Quang, TP Thái Nguyên"
            ];
            
            for (let i = 0; i < venueLines.length; i++) {
                text(venueLines[i], card2X + cardWidth/2, cardY + 145 + i * 25); // Increased line spacing
            }
            pop();
        }
        
        function windowResized() {
            resizeCanvas(windowWidth, windowHeight);
        }
    </script>
</body>
</html>
