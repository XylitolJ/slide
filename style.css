.header-progress-bar {
    position: absolute;
    top: 0;
    left: 0;
    height: 4px;
    background: linear-gradient(90deg, #ff6b6b, #4ecdc4, #45b7d1, #96ceb4, #feca57);
    background-size: 300% 100%;
    animation: progressRainbow 3s ease-in-out infinite;
    width: 100%; /* JS will update this */
    z-index: 1000; /* Ensure it's above the header */
    transition: width 0.3s linear, background 0.3s linear;
}
.u-hidden-initially {
    display: none !important;
}
/* General Styles */
body, html {
    height: 100%;
    margin: 0;
    overflow: hidden; /* Prevent scrollbars */
    font-family: 'Inter', sans-serif;
    background-color: #f0f4f8; /* A light fallback background */
}

.slide-container {
    width: 100vw;
    height: 100vh;
    margin: 0;
    display: flex;
    flex-direction: column;
    /* background: linear-gradient(135deg, #FFCA55 0%, #F29F05 50%, #F25C05 100%); */ /* Base background from Test1.html will be applied here */
}

.text-shadow {
    text-shadow: 1px 1px 3px rgba(0,0,0,0.2);
}

/* .theme-cspl { background: linear-gradient(135deg, #064e3b 0%, #10b981 50%, #a7f3d0 100%); } */
.theme-cspl #questionNumber { background-color: #047857; } /* Keep specific element styling if needed */
.theme-cspl #questionIconContainer { background-color: #047857; }


/* .theme-pccc { background: linear-gradient(135deg, #991b1b 0%, #ef4444 50%, #fecaca 100%); } */
.theme-pccc #questionNumber { background-color: #b91c1c; }
.theme-pccc #questionIconContainer { background-color: #b91c1c; }

/* .theme-yte { background: linear-gradient(135deg, #5b21b6 0%, #a855f7 50%, #e9d5ff 100%); } */
.theme-yte #questionNumber { background-color: #7e22ce; }
.theme-yte #questionIconContainer { background-color: #7e22ce; }


/* .theme-ktm { background: linear-gradient(135deg, #78350f 0%, #d97706 50%, #fde68a 100%); } */
.theme-ktm #questionNumber { background-color: #b45309; }
.theme-ktm #questionIconContainer { background-color: #b45309; }

/* .theme-bq-bx-vc { background: linear-gradient(135deg, #1e40af 0%, #3b82f6 50%, #bfdbfe 100%); } */
.theme-bq-bx-vc #questionNumber { background-color: #1d4ed8; }
.theme-bq-bx-vc #questionIconContainer { background-color: #1d4ed8; }


.question-appear {
    animation: questionSlideIn 1s ease-out forwards;
}

.option-appear {
    animation: optionSlideIn 0.7s ease-out forwards;
}

.image-appear {
    animation: imageFadeIn 1.2s ease-out forwards;
}

@keyframes questionSlideIn {
    0% { opacity: 0; transform: translateY(-20px); }
    100% { opacity: 1; transform: translateY(0); }
}

@keyframes optionSlideIn {
    0% { opacity: 0; transform: translateX(-30px); }
    100% { opacity: 1; transform: translateX(0); }
}

@keyframes imageFadeIn {
    0% { opacity: 0; transform: scale(0.95); }
    100% { opacity: 1; transform: scale(1); }
}

.option-card {
    transition: all 0.3s ease;
    /* cursor: pointer; */
    display: flex; 
    align-items: center;
    /* Use a light gradient background instead of white to provide better contrast */
    background: linear-gradient(135deg, rgba(248, 250, 252, 0.95), rgba(241, 245, 249, 0.95)) !important;
    border: 1px solid rgba(203, 213, 225, 0.6) !important;
    backdrop-filter: blur(8px);
}
.option-card:hover {
    transform: translateX(8px) scale(1.02);
    box-shadow: 0 6px 20px rgba(0,0,0,0.1);
    background: linear-gradient(135deg, rgba(241, 245, 249, 0.98), rgba(226, 232, 240, 0.98)) !important;
}

.option-char-default { 
    background: linear-gradient(135deg, #475569, #334155) !important; 
    box-shadow: 0 2px 8px rgba(71, 85, 105, 0.4) !important;
} /* Default, darker */
.option-char-a { 
    background: linear-gradient(135deg, #dc2626, #b91c1c) !important; 
    box-shadow: 0 2px 8px rgba(220, 38, 38, 0.4) !important;
} /* Red - darker */
.option-char-b { 
    background: linear-gradient(135deg, #2563eb, #1d4ed8) !important; 
    box-shadow: 0 2px 8px rgba(37, 99, 235, 0.4) !important;
} /* Blue - darker */
.option-char-c { 
    background: linear-gradient(135deg, #059669, #047857) !important; 
    box-shadow: 0 2px 8px rgba(5, 150, 105, 0.4) !important;
} /* Green - darker */
.option-char-d { 
    background: linear-gradient(135deg, #d97706, #b45309) !important; 
    box-shadow: 0 2px 8px rgba(217, 119, 6, 0.4) !important;
} /* Amber - darker */
.option-char-e { 
    background: linear-gradient(135deg, #7c3aed, #6d28d9) !important; 
    box-shadow: 0 2px 8px rgba(124, 58, 237, 0.4) !important;
} /* Indigo - darker */
.option-char-f { 
    background: linear-gradient(135deg, #be185d, #9d174d) !important; 
    box-shadow: 0 2px 8px rgba(190, 24, 93, 0.4) !important;
} /* Pink - darker */
.option-char-g { 
    background: linear-gradient(135deg, #0891b2, #0e7490) !important; 
    box-shadow: 0 2px 8px rgba(8, 145, 178, 0.4) !important;
} /* Violet - darker */

/* Additional option character colors for more options */
.option-char-h { 
    background: linear-gradient(135deg, #65a30d, #4d7c0f) !important; 
    box-shadow: 0 2px 8px rgba(101, 163, 13, 0.4) !important;
} /* Lime - darker */
.option-char-i { 
    background: linear-gradient(135deg, #ea580c, #c2410c) !important; 
    box-shadow: 0 2px 8px rgba(234, 88, 12, 0.4) !important;
} /* Orange - darker */
.option-char-j { 
    background: linear-gradient(135deg, #8b5cf6, #7c3aed) !important; 
    box-shadow: 0 2px 8px rgba(139, 92, 246, 0.4) !important;
} /* Purple - darker */

/* Styles for the option character (A, B, C, D) to ensure it's always a circle */
.option-char {
    display: inline-flex; /* Allows it to sit nicely next to the option text */
    align-items: center;  /* Vertically centers the letter (e.g., A, B) inside the circle */
    justify-content: center; /* Horizontally centers the letter inside the circle */
    width: 2rem;          /* Fixed width for the circle (e.g., 32px if 1rem = 16px) */
    height: 2rem;         /* Fixed height, must be equal to width for a perfect circle */
    border-radius: 50%;   /* This makes the element circular */
    color: white !important;         /* Text color for the character (A, B, C, D) - force white */
    font-weight: 700 !important;     /* Makes the character font bold */
    flex-shrink: 0;       /* IMPORTANT: Prevents the circle from shrinking or deforming when option text is long or wraps */
    margin-right: 0.75rem; /* Adds some space between the circle and the option text (Tailwind's mr-3) */
    text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3) !important; /* Add text shadow for better readability */
    border: 2px solid rgba(255, 255, 255, 0.2) !important; /* Subtle white border for definition */
    /* Background color for the circle itself is typically applied by specific classes like .option-char-a, .option-char-b, etc. */
}

/* Correct Answer Styling (from original style.css, keep for main content) */
.correct-answer {
    background: linear-gradient(45deg, #10b981, #34d399) !important;
    color: white !important;
    border: 3px solid #fbbf24 !important;
    border-left: 6px solid #fbbf24 !important;
    box-shadow: 0 0 25px rgba(16, 185, 129, 0.5) !important;
    transform: scale(1.02);
    position: relative;
    z-index: 10;
    opacity: 1 !important; /* Ensure the element is opaque */
    visibility: visible !important; /* Ensure the element is visible */
}

.correct-answer::before {
    content: 'âœ“';
    position: absolute;
    top: -10px;
    right: -10px;
    background: #fbbf24;
    color: white;
    border-radius: 50%;
    width: 24px;
    height: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
    font-size: 14px;
    box-shadow: 0 2px 8px rgba(251, 191, 36, 0.4);
}

.correct-answer span {
    color: white !important;
    font-weight: 700 !important;
    text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
}

.correct-answer .option-char {
    background: linear-gradient(45deg, #fbbf24, #f59e0b) !important;
    color: white !important;
    border: 2px solid white !important;
    box-shadow: 0 0 15px rgba(251, 191, 36, 0.6) !important;
}

/* Speaking/Loading Indicator for Buttons (from original style.css) */
.speaking-indicator {
    background: linear-gradient(45deg, #f59e0b, #fbbf24) !important;
    animation: speakingPulse 1s ease-in-out infinite;
}
@keyframes speakingPulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.03); }
}

.pulse-icon {
    animation: pulseIcon 2s infinite;
}
@keyframes pulseIcon {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.08); }
}

#imageWrapper img {
    max-width: 100%;
    max-height: 100%;
    object-fit: contain; /* Ensures image fits without cropping, maintains aspect ratio */
}

#questionSection, #optionsContainer > .option-card { /* #slideImage removed from this rule */
    opacity: 0;
}

#questionOptionsArea {
    scrollbar-width: thin;
    scrollbar-color: rgba(156, 163, 175, 0) transparent; /* gray-400 for thumb */
}
#questionOptionsArea::-webkit-scrollbar {
    width: 8px;
}
#questionOptionsArea::-webkit-scrollbar-track {
    background: transparent;
}
#questionOptionsArea::-webkit-scrollbar-thumb {
    background-color: rgba(156, 163, 175, 0.5); /* gray-400 */
    border-radius: 10px;
    border: 2px solid transparent;
    background-clip: content-box;
}

#imageArea {
    min-height: 0; /* Allow shrinking if needed */
}

.hidden {
    display: none !important;
}

* {
    box-sizing: border-box;
}


.slide-container { /* This selector is already defined, styles will be merged/overridden */
    background: linear-gradient(135deg, #FFCA55 0%, #F29F05 50%, #F25C05 100%); /* This is the new background */
}

.floating-particles {
    position: absolute;
    width: 100%;
    height: 100%;
    overflow: hidden;
    z-index: 1; /* Ensure it's behind content-layer */
}

.particle {
    position: absolute;
    border-radius: 50%;
    pointer-events: none;
}

/* Multiple animation variations for more randomness */
.particle:nth-child(1) { 
    width: 8px; height: 8px; 
    left: 5%; 
    background: rgba(255, 255, 255, 0.4);
    animation: floatSlow 12s infinite linear;
    animation-delay: 0s; 
}
.particle:nth-child(2) { 
    width: 18px; height: 18px; 
    left: 15%; 
    background: rgba(255, 255, 255, 0.2);
    animation: floatFast 6s infinite ease-in-out;
    animation-delay: 2.3s; 
}
.particle:nth-child(3) { 
    width: 12px; height: 12px; 
    left: 28%; 
    background: rgba(255, 255, 255, 0.35);
    animation: floatWobble 10s infinite linear;
    animation-delay: 1.7s; 
}
.particle:nth-child(4) { 
    width: 22px; height: 22px; 
    left: 42%; 
    background: rgba(255, 255, 255, 0.15);
    animation: floatSlow 14s infinite ease-out;
    animation-delay: 4.1s; 
}
.particle:nth-child(5) { 
    width: 6px; height: 6px; 
    left: 52%; 
    background: rgba(255, 255, 255, 0.5);
    animation: floatFast 5s infinite linear;
    animation-delay: 3.8s; 
}
.particle:nth-child(6) { 
    width: 16px; height: 16px; 
    left: 67%; 
    background: rgba(255, 255, 255, 0.25);
    animation: floatWobble 9s infinite ease-in-out;
    animation-delay: 6.2s; 
}
.particle:nth-child(7) { 
    width: 14px; height: 14px; 
    left: 73%; 
    background: rgba(255, 255, 255, 0.3);
    animation: floatSlow 11s infinite linear;
    animation-delay: 0.5s; 
}
.particle:nth-child(8) { 
    width: 20px; height: 20px; 
    left: 85%; 
    background: rgba(255, 255, 255, 0.18);
    animation: floatFast 7s infinite ease-out;
    animation-delay: 5.4s; 
}
.particle:nth-child(9) { 
    width: 10px; height: 10px; 
    left: 92%; 
    background: rgba(255, 255, 255, 0.4);
    animation: floatWobble 13s infinite linear;
    animation-delay: 2.9s; 
}
.particle:nth-child(10) { 
    width: 7px; height: 7px; 
    left: 8%; 
    background: rgba(255, 255, 255, 0.35);
    animation: floatFast 8s infinite ease-in-out;
    animation-delay: 7.1s; 
}
.particle:nth-child(11) { 
    width: 24px; height: 24px; 
    left: 35%; 
    background: rgba(255, 255, 255, 0.12);
    animation: floatSlow 15s infinite linear;
    animation-delay: 1.2s; 
}
.particle:nth-child(12) { 
    width: 9px; height: 9px; 
    left: 78%; 
    background: rgba(255, 255, 255, 0.45);
    animation: floatWobble 6.5s infinite ease-out;
    animation-delay: 4.7s; 
}

/* Multiple floating animations for variety */
@keyframes floatSlow {
    0% { transform: translateY(100vh) translateX(0px) rotate(0deg) scale(0.5); opacity: 0; }
    10% { opacity: 1; transform: translateY(90vh) translateX(5px) rotate(45deg) scale(0.8); }
    50% { transform: translateY(50vh) translateX(-10px) rotate(180deg) scale(1); }
    90% { opacity: 1; transform: translateY(10vh) translateX(8px) rotate(315deg) scale(0.9); }
    100% { transform: translateY(-10vh) translateX(0px) rotate(360deg) scale(0.3); opacity: 0; }
}

@keyframes floatFast {
    0% { transform: translateY(100vh) translateX(0px) rotate(0deg) scale(0.3); opacity: 0; }
    20% { opacity: 1; transform: translateY(80vh) translateX(-8px) rotate(90deg) scale(1); }
    80% { opacity: 1; transform: translateY(20vh) translateX(12px) rotate(270deg) scale(1.1); }
    100% { transform: translateY(-10vh) translateX(-5px) rotate(360deg) scale(0.4); opacity: 0; }
}

@keyframes floatWobble {
    0% { transform: translateY(100vh) translateX(0px) rotate(0deg) scale(0.7); opacity: 0; }
    15% { opacity: 1; transform: translateY(85vh) translateX(15px) rotate(60deg) scale(0.9); }
    30% { transform: translateY(70vh) translateX(-10px) rotate(120deg) scale(1.2); }
    45% { transform: translateY(55vh) translateX(20px) rotate(180deg) scale(0.8); }
    60% { transform: translateY(40vh) translateX(-15px) rotate(240deg) scale(1.1); }
    75% { transform: translateY(25vh) translateX(8px) rotate(300deg) scale(0.9); }
    90% { opacity: 1; transform: translateY(10vh) translateX(-5px) rotate(350deg) scale(1); }
    100% { transform: translateY(-10vh) translateX(0px) rotate(360deg) scale(0.5); opacity: 0; }
}

.content-layer {
    position: relative;
    z-index: 10;
    height: 100%;
    display: flex;
    flex-direction: column;
}

.header { /* New header style */
    background: rgba(4, 120, 87, 0.95); /* Default, will be themed */
    backdrop-filter: blur(10px);
    padding: 0.75vh 4vw; /* Reduced vertical padding */
    display: flex;
    justify-content: space-between;
    align-items: center;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
    flex-shrink: 0;
    position: relative;
    z-index: 20;
    animation: headerSlideDown 1s ease-out;
}

/* New structure for centered question-header */
.header > div:first-child {
    flex: 1; /* Contest info takes up left space */
}

.header > div:nth-child(2) {
    flex: 0 0 auto; /* Question header stays in center */
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
}

.header > div:last-child {
    flex: 1; /* Empty space on right for balance */
}

.contest-info h1 {
    color: white;
    font-size: 1.4vw; /* Reduced font size */
    font-weight: 800;
    text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.3); /* Adjusted shadow */
}

.contest-info p {
    color: rgba(255, 255, 255, 0.9);
    font-size: 0.7vw; /* Reduced font size */
    margin-top: 0.25vh; /* Reduced margin */
}

.question-header { /* Container for question number, category, timer in the new header */
    display: flex;
    align-items: center;
    gap: 2vw;
}

.question-number { /* Style for new question number display */
    background: linear-gradient(135deg, #F25C05, #F29F05);
    color: white;
    padding: 0.5vh 1.2vw; /* Reduced padding */
    border-radius: 15px; /* Slightly smaller radius */
    font-size: 1.3vw; /* Reduced font size */
    font-weight: 700;
    box-shadow: 0 4px 15px rgba(242, 92, 5, 0.3); /* Adjusted shadow */
    animation: pulse 2s infinite; /* This is a new 'pulse' animation */
}

.category-badge { /* Style for new category display */
    background: linear-gradient(135deg, #F25C05, #F29F05);
    color: white;
    padding: 0.5vh 1vw; /* Reduced padding */
    border-radius: 12px; /* Slightly smaller radius */
    font-size: 0.7vw; /* Reduced font size */
    font-weight: 600;
    backdrop-filter: blur(10px);
}

.timer-circle { /* This is for the new timer structure from Test1.html */
    position: relative;
    width: 3.5vw; /* Reduced width */
    height: 3.5vw; /* Reduced height */
    min-width: 40px; /* Reduced minimum size */
    min-height: 40px; /* Reduced minimum size */
}

/* Floating Timer Styles */
.floating-timer {
    position: fixed;
    top: 1vh; /* Moved closer to top */
    right: 1.5vw; /* Moved closer to right edge */
    z-index: 1000; /* Very high z-index to float above everything */
    transition: all 0.3s ease;
}

.floating-timer .timer-circle {
    width: 6vw; /* Increased size */
    height: 6vw; /* Increased size */
    min-width: 80px; /* Increased minimum size */
    min-height: 80px; /* Increased minimum size */
    transition: all 0.3s ease;
    filter: drop-shadow(0 4px 20px rgba(0, 0, 0, 0.3));
    background: rgba(0, 0, 0, 0.4); /* Semi-transparent solid background */
    border-radius: 50%; /* Make it circular */
    backdrop-filter: blur(8px); /* Add blur for glass effect */
}

/* Active state when timer is running */
.floating-timer.timer-active {
    animation: timerFloatPulse 2s infinite ease-in-out;
}

.floating-timer.timer-active .timer-circle {
    transform: scale(1.1);
    filter: drop-shadow(0 0 30px rgba(255, 255, 255, 0.8)) 
            drop-shadow(0 0 60px rgba(255, 255, 255, 0.4));
}

/* Warning state (last 10 seconds) */
.floating-timer.timer-warning {
    animation: timerWarningPulse 1s infinite ease-in-out;
}

.floating-timer.timer-warning .timer-circle {
    transform: scale(1.2);
    filter: drop-shadow(0 0 40px rgba(255, 107, 0, 0.9)) 
            drop-shadow(0 0 80px rgba(255, 107, 0, 0.5));
}

/* Danger state (last 5 seconds) */
.floating-timer.timer-danger {
    animation: timerDangerPulse 0.5s infinite ease-in-out;
}

.floating-timer.timer-danger .timer-circle {
    transform: scale(1.3);
    filter: drop-shadow(0 0 50px rgba(255, 32, 32, 1)) 
            drop-shadow(0 0 100px rgba(255, 32, 32, 0.7));
}

/* Floating timer animations */
@keyframes timerFloatPulse {
    0%, 100% { transform: translateY(0px); }
    50% { transform: translateY(-5px); }
}

@keyframes timerWarningPulse {
    0%, 100% { 
        transform: translateY(0px) scale(1); 
        filter: drop-shadow(0 0 30px rgba(255, 107, 0, 0.9)) 
                drop-shadow(0 0 60px rgba(255, 107, 0, 0.5));
    }
    50% { 
        transform: translateY(-8px) scale(1.05); 
        filter: drop-shadow(0 0 40px rgba(255, 107, 0, 1)) 
                drop-shadow(0 0 80px rgba(255, 107, 0, 0.7));
    }
}

@keyframes timerDangerPulse {
    0%, 100% { 
        transform: translateY(0px) scale(1); 
        filter: drop-shadow(0 0 40px rgba(255, 32, 32, 1)) 
                drop-shadow(0 0 80px rgba(255, 32, 32, 0.7));
    }
    50% { 
        transform: translateY(-10px) scale(1.1); 
        filter: drop-shadow(0 0 40px rgba(255, 32, 32, 1)) 
                drop-shadow(0 0 80px rgba(255, 32, 32, 0.8));
    }
}

.timer-svg {
    width: 100%;
    height: 100%;
}

.timer-circle-bg { /* Background of the new timer circle */
    fill: none;
    stroke: rgba(255, 255, 255, 0.2); /* More subtle background */
    stroke-width: 6;
}

.timer-circle-progress { /* Progress part of the new timer circle */
    fill: none;
    stroke: #ffffff; /* Default progress color - bright white for maximum visibility */
    stroke-width: 6;
    stroke-linecap: round;
    stroke-dasharray: 283 283; /* Full circumference visible, full circumference gap */
    stroke-dashoffset: 0; /* Start full for countdown timer */
    transition: stroke-dashoffset 0.1s linear, stroke 0.1s ease; /* Fast transitions for 100ms updates */
    transform: rotate(-90deg) scaleX(-1); /* Start from top and reverse direction for counter-clockwise */
    transform-origin: center; /* Ensure rotation happens around center */
}

/* Enhanced progress animations for floating timer */
.floating-timer .timer-circle-progress {
    transition: stroke-dashoffset 0.05s linear, stroke 0.1s ease; /* Even faster for floating timer */
}

.timer-circle-progress.warning {
    stroke: #FF6B00; /* Dark orange for final warning */
}

.timer-circle-progress.danger {
    stroke: #FF2020; /* Bright red for critical danger */
}

.timer-text { /* Text inside the new timer */
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    color: #ffffff; /* Bright white for maximum visibility */
    font-size: 1.8vw; /* Increased font size */
    font-weight: 700;
    transition: color 0.3s ease;
}

/* Floating timer text size adjustment */
.floating-timer .timer-text {
    font-size: 2.8vw; /* Increased font for larger floating timer */
    text-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
    font-weight: 800; /* Bolder font */
}

.timer-text.warning {
    color: #FF6B00; /* Dark orange for final warning */
}

.timer-text.danger {
    color: #FF2020; /* Bright red for critical danger */
}

/* @keyframes countdown {
    from { stroke-dashoffset: 0; }
    to { stroke-dashoffset: 226; }
} */ /* JS will handle this */

@keyframes pulse { /* New pulse animation from Test1.html */
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.05); }
}


.footer { /* New footer style */
    background: rgba(4, 120, 87, 0.95); /* Default, will be themed */
    backdrop-filter: blur(10px);
    padding: 1vh 4vw; /* Reduced vertical padding */
    color: white;
    display: flex;
    justify-content: space-between;
    align-items: center;
    position: relative;
    z-index: 20;
    animation: footerSlideUp 1s ease-out;
    flex-shrink: 0;
}

.footer-left h3 {
    font-size: 0.9vw; /* Reduced font size */
    font-weight: 700;
    margin-bottom: 0.25vh; /* Reduced margin */
}
 
.footer-left p {
    font-size: 0.65vw; /* Reduced font size */
    opacity: 0.9;
}

.footer-controls {
    display: flex;
    align-items: center;
    gap: 0.5rem; /* Slightly reduced gap */
}

/* Overriding Tailwind for footer buttons to make them smaller */
.footer-controls button {
    padding: 0.4rem 0.8rem !important; /* Reduced padding */
    font-size: 0.8rem !important; /* Reduced font size */
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
}
.footer-controls button::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0;
    height: 0;
    background: rgba(255, 255, 255, 0.2);
    border-radius: 50%;
    transform: translate(-50%, -50%);
    transition: width 0.3s ease, height 0.3s ease;
}
.footer-controls button:hover::before {
    width: 100%;
    height: 100%;
}
.footer-controls button:active {
    transform: scale(0.95);
}
.footer-controls button i {
    margin-right: 0.3rem !important; /* Adjust icon margin if needed */
}
 
.footer-right {
    text-align: right;
}

.footer-right .date {
    font-size: 0.8vw; /* Reduced font size */
    font-weight: 600;
    margin-bottom: 0.25vh; /* Reduced margin */
}
 
.footer-right .location {
    font-size: 0.65vw; /* Reduced font size */
    opacity: 0.9;
}

.progress-bar { /* Progress bar at the bottom of the footer */
    position: absolute;
    bottom: 0;
    left: 0;
    height: 6px;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
    background-size: 200% 100%;
    animation: progressShimmer 2s infinite;
    width: 0%; /* JS will update this, start at 0 or a default */
    animation: progressGlow 2s ease-in-out infinite alternate;
    transition: width 0.5s ease-out;
}

@keyframes progressGlow {
    from { box-shadow: 0 0 5px rgba(255, 202, 85, 0.5); }
    to { box-shadow: 0 0 20px rgba(242, 92, 5, 0.8); }
}

@keyframes slideInLeft { /* From Test1.html, could be reused or renamed if conflicts */
    from { opacity: 0; transform: translateX(-50px); }
    to { opacity: 1; transform: translateX(0); }
}

@keyframes slideInUp { /* From Test1.html */
    from { opacity: 0; transform: translateY(30px); }
    to { opacity: 1; transform: translateY(0); }
}

/* @keyframes imageAnimation1 ... imageAnimation4 - Not used for now to keep original image animation */

.floating-icon { /* Decorative icons from Test1.html */
    position: absolute;
    font-size: 1.5vw;
    color: rgba(255, 255, 255, 0.2);
    animation: floatIcon 6s ease-in-out infinite;
    z-index: 5; /* Ensure they are above particles but below content layer's main elements */
}

.icon-1 { top: 20%; left: 5%; animation-delay: 0s; }
.icon-2 { top: 40%; right: 8%; animation-delay: 1.5s; }
.icon-3 { bottom: 30%; left: 3%; animation-delay: 3s; }
.icon-4 { top: 60%; left: 15%; animation-delay: 4.5s; }

@keyframes floatIcon {
    0%, 100% { transform: translateY(0px) rotate(0deg); }
    50% { transform: translateY(-20px) rotate(180deg); }
}

.time-up-overlay {
    position: fixed; /* Use fixed to cover viewport */
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    display: none; /* JS will toggle to flex */
    align-items: center;
    justify-content: center;
    background: rgba(0, 0, 0, 0.8);
    z-index: 10000; /* Very high z-index */
    backdrop-filter: blur(10px);
    opacity: 0; /* Animation will fade it in */
    /* animation: fadeInOverlay 0.5s ease-out forwards; JS will handle entry animation */
}

.time-up-content {
    background: rgba(220, 38, 38, 0.95);
    color: white;
    padding: 4vh 6vw;
    border-radius: 25px;
    font-size: 2.8vw; /* Responsive */
    font-weight: 800;
    text-align: center;
    box-shadow: 0 25px 80px rgba(0, 0, 0, 0.4);
    backdrop-filter: blur(15px);
    /* animation: pulseTimeUpSmooth 2s ease-in-out infinite; Combined with entry */
    border: 3px solid rgba(255, 255, 255, 0.3);
    transform: scale(0.8); /* Initial state for animation */
    /* animation: slideInTimeUp 0.6s ease-out forwards, pulseTimeUpSmooth 2s ease-in-out infinite 0.6s; JS will handle entry */
}

.time-up-content .subtitle {
    font-size: 1.4vw; /* Responsive */
    margin-top: 2vh;
    opacity: 0.95;
    font-weight: 600;
}

@keyframes fadeInOverlay {
    from { opacity: 0; }
    to { opacity: 1; }
}

@keyframes slideInTimeUp {
    from {
        transform: scale(0.8) translateY(30px);
        opacity: 0;
    }
    to {
        transform: scale(1) translateY(0);
        opacity: 1;
    }
}

@keyframes pulseTimeUpSmooth {
    0%, 100% {
        transform: scale(1);
        box-shadow: 0 25px 80px rgba(220, 38, 38, 0.3);
    }
    50% {
        transform: scale(1.015);
        box-shadow: 0 30px 100px rgba(220, 38, 38, 0.45);
    }
}

/* Media Queries from Test1.html - adjust as needed */
@media (max-width: 1200px) {
    .contest-info h1 { font-size: 18px !important; } /* Reduced */
    .contest-info p { font-size: 10px !important; } /* Reduced */
    .question-number { font-size: 14px !important; padding: 0.4vh 1vw !important; } /* Reduced */
    .category-badge { font-size: 10px !important; padding: 0.4vh 0.8vw !important; } /* Reduced */
    .timer-text { 
        font-size: 11px !important; 
        color: #ffffff !important; /* Ensure white color is maintained in mobile */
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5) !important; /* Enhanced shadow for mobile */
    }
    /* .question-text h2 { font-size: 22px; } */
    /* .option-text { font-size: 14px; } */
    /* .option-letter { font-size: 14px; width: 30px; height: 30px; line-height: 30px; } */
    .footer-left h3 { font-size: 12px !important; } /* Reduced */
    .footer-left p { font-size: 9px !important; } /* Reduced */
    .footer-right .date { font-size: 11px !important; } /* Reduced */
    .footer-right .location { font-size: 9px !important; } /* Reduced */
      /* Floating timer responsive adjustments */
    .floating-timer {
        top: 1vh;
        right: 1vw;
    }
    
    .floating-timer .timer-circle {
        width: 70px !important;
        height: 70px !important;
    }
    
    .floating-timer .timer-text {
        font-size: 18px !important;
    }
}

/* NEW THEME STYLES FOR HEADER AND FOOTER */
.header-footer-theme-default .header,
.header-footer-theme-default .footer {
    background: rgba(4, 120, 87, 0.95) !important; /* Default green from Test1.html */
}

.header-footer-theme-cspl .header,
.header-footer-theme-cspl .footer {
    background: linear-gradient(135deg, #065f46, #047857) !important;
}
.header-footer-theme-pccc .header,
.header-footer-theme-pccc .footer {
    background: linear-gradient(135deg, #991b1b, #b91c1c) !important;
}
.header-footer-theme-yte .header,
.header-footer-theme-yte .footer {
    background: linear-gradient(135deg, #5b21b6, #7c3aed) !important;
}
.header-footer-theme-ktm .header,
.header-footer-theme-ktm .footer {
    background: linear-gradient(135deg, #78350f, #9a3412) !important;
}
.header-footer-theme-bq-bx-vc .header,
.header-footer-theme-bq-bx-vc .footer {
    background: linear-gradient(135deg, #1e40af, #1d4ed8) !important;
}


/* Round-based themes V2 */
.header-footer-theme-vong1 .header,
.header-footer-theme-vong1 .footer {
    background: linear-gradient(135deg, #059669, #10b981, #34d399) !important; /* Green gradient for Round 1 */
}

.header-footer-theme-vong2 .header,
.header-footer-theme-vong2 .footer {
    background: linear-gradient(135deg, #d97706, #f59e0b, #fbbf24) !important; /* Amber gradient for Round 2 */
}

.header-footer-theme-vong3 .header,
.header-footer-theme-vong3 .footer {
    background: linear-gradient(135deg, #7c3aed, #a855f7, #c084fc) !important; /* Purple gradient for Round 3 */
}

/* Glass Theme Base */
.header-footer-theme-glass .header,
.header-footer-theme-glass .footer {
    background: rgba(255, 255, 255, 0.1) !important;
    backdrop-filter: blur(1px) !important;
    /* border: 0.1px solid transparent !important; */
    position: relative;
    overflow: hidden;
}

/* Glass Theme cho tá»«ng vÃ²ng vá»›i border-image gradient */
.header-footer-theme-glass-vong1 .header,
.header-footer-theme-glass-vong1 .footer {
    border-image: linear-gradient(135deg, #059669, #10b981, #34d399) 1 !important;
}

.header-footer-theme-glass-vong2 .header,
.header-footer-theme-glass-vong2 .footer {
    border-image: linear-gradient(135deg, #d97706, #f59e0b, #fbbf24) 1 !important;
}

.header-footer-theme-glass-vong3 .header,
.header-footer-theme-glass-vong3 .footer {
    border-image: linear-gradient(135deg, #7c3aed, #a855f7, #c084fc) 1 !important;
}

/* Enhanced text styling for glass theme - Header (Combined Approach for readability) */
.header-footer-theme-glass .header .contest-info h1,
.header-footer-theme-glass-vong1 .header .contest-info h1,
.header-footer-theme-glass-vong2 .header .contest-info h1,
.header-footer-theme-glass-vong3 .header .contest-info h1 {
    color: white !important;
    text-shadow: 0 0 6px rgba(0, 0, 0, 0.8), 0 0 2px rgba(0, 0, 0, 1) !important;
    -webkit-text-stroke: 0.5px rgba(0, 0, 0, 0.3) !important;
    font-weight: 900 !important;
}

.header-footer-theme-glass .header .contest-info p,
.header-footer-theme-glass-vong1 .header .contest-info p,
.header-footer-theme-glass-vong2 .header .contest-info p,
.header-footer-theme-glass-vong3 .header .contest-info p {
    color: white !important;
    text-shadow: 0 0 6px rgba(0, 0, 0, 0.8), 0 0 2px rgba(0, 0, 0, 1) !important;
    -webkit-text-stroke: 0.5px rgba(0, 0, 0, 0.3) !important;
    font-weight: 700 !important;
}

.header-footer-theme-glass .header .question-number,
.header-footer-theme-glass-vong1 .header .question-number,
.header-footer-theme-glass-vong2 .header .question-number,
.header-footer-theme-glass-vong3 .header .question-number {
    text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.8) !important;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4), 
                inset 0 1px 0 rgba(255, 255, 255, 0.3) !important;
}

.header-footer-theme-glass .header .category-badge,
.header-footer-theme-glass-vong1 .header .category-badge,
.header-footer-theme-glass-vong2 .header .category-badge,
.header-footer-theme-glass-vong3 .header .category-badge {
    color: white !important;
    text-shadow: 0 0 2px rgba(0, 0, 0, 0.8), 0 0 2px rgba(0, 0, 0, 1) !important;
    /* -webkit-text-stroke: 0.5px rgba(0, 0, 0, 0.3) !important; */
    font-weight: 700 !important;
    font-size: 0.85vw !important; /* TÄƒng size má»™t chÃºt cho category khi theme glass */
}

/* Enhanced text styling for glass theme - Footer (Combined Approach for readability) */
.header-footer-theme-glass .footer h3,
.header-footer-theme-glass-vong1 .footer h3,
.header-footer-theme-glass-vong2 .footer h3,
.header-footer-theme-glass-vong3 .footer h3 {
    color: white !important;
    text-shadow: 0 0 6px rgba(0, 0, 0, 0.8), 0 0 2px rgba(0, 0, 0, 1) !important;
    -webkit-text-stroke: 0.5px rgba(0, 0, 0, 0.3) !important;
    font-weight: 800 !important;
}

.header-footer-theme-glass .footer p,
.header-footer-theme-glass-vong1 .footer p,
.header-footer-theme-glass-vong2 .footer p,
.header-footer-theme-glass-vong3 .footer p {
    color: white !important;
    text-shadow: 0 0 6px rgba(0, 0, 0, 0.8), 0 0 2px rgba(0, 0, 0, 1) !important;
    -webkit-text-stroke: 0.5px rgba(0, 0, 0, 0.3) !important;
    font-weight: 700 !important;
}

.header-footer-theme-glass .footer .date,
.header-footer-theme-glass-vong1 .footer .date,
.header-footer-theme-glass-vong2 .footer .date,
.header-footer-theme-glass-vong3 .footer .date {
    color: white !important;
    text-shadow: 0 0 6px rgba(0, 0, 0, 0.8), 0 0 2px rgba(0, 0, 0, 1) !important;
    -webkit-text-stroke: 0.5px rgba(0, 0, 0, 0.3) !important;
    font-weight: 700 !important;
}

.header-footer-theme-glass .footer .location,
.header-footer-theme-glass-vong1 .footer .location,
.header-footer-theme-glass-vong2 .footer .location,
.header-footer-theme-glass-vong3 .footer .location {
    color: white !important;
    text-shadow: 0 0 6px rgba(0, 0, 0, 0.8), 0 0 2px rgba(0, 0, 0, 1) !important;
    -webkit-text-stroke: 0.5px rgba(0, 0, 0, 0.3) !important;
    font-weight: 700 !important;
}

.header-footer-theme-glass .footer #progressText,
.header-footer-theme-glass-vong1 .footer #progressText,
.header-footer-theme-glass-vong2 .footer #progressText,
.header-footer-theme-glass-vong3 .footer #progressText {
    color: white !important;
    text-shadow: 0 0 6px rgba(0, 0, 0, 0.8), 0 0 2px rgba(0, 0, 0, 1) !important;
    -webkit-text-stroke: 0.5px rgba(0, 0, 0, 0.3) !important;
    font-weight: 800 !important;
}
/* User customizable styles */
:root { --question-font-size: 1.5rem; --option-font-size: 1.25rem; }
.question-text { font-size: var(--question-font-size); }
.option-text { font-size: var(--option-font-size); }
.audio-highlight { background: rgba(255,235,59,0.25) !important; border-color: #fbbf24 !important; border-width: 3px !important; transform: scale(1.02) !important; transition: all 0.3s ease !important; box-shadow: 0 0 20px rgba(251,191,36,0.4) !important; }

/* Note sections styling for Round 2 */
.note-section {
    margin: 1rem 0;
    padding: 0.75rem 1rem;
    background: linear-gradient(135deg, rgba(219, 234, 254, 0.9), rgba(191, 219, 254, 0.8));
    border-left: 4px solid #3b82f6;
    border-radius: 0 0.5rem 0.5rem 0;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    backdrop-filter: blur(4px);
}

.note-section i {
    color: #2563eb;
    font-size: 1.1rem;
}

.note-section span {
    color: #1e40af;
    font-weight: 700;
    font-size: 1.1rem;
    letter-spacing: 0.025em;
}

/* Score badge styling - Updated with orange/gold theme to contrast with green background */
.score-badge {
    background: linear-gradient(135deg, #f59e0b, #d97706) !important;
    color: white !important;
    font-weight: 700 !important;
    font-size: 0.875rem !important;
    padding: 0.25rem 0.5rem !important;
    border-radius: 9999px !important;
    display: inline-flex !important;
    align-items: center !important;
    gap: 0.25rem !important;
    box-shadow: 0 2px 6px rgba(245, 158, 11, 0.4) !important;
    animation: scoreAppear 0.5s ease-out forwards !important;
    margin-left: 0.5rem !important;
    border: 2px solid #fbbf24 !important;
}

.score-badge i {
    color: #fef3c7 !important;
    font-size: 0.75rem !important;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2) !important;
}

@keyframes scoreAppear {
    0% {
        opacity: 0;
        transform: scale(0.8) translateY(-10px);
    }
    50% {
        transform: scale(1.1) translateY(-2px);
    }
    100% {
        opacity: 1;
        transform: scale(1) translateY(0);
    }
}

/* Enhanced correct answer highlighting with better readability */
.option-card.correct-answer {
    background: linear-gradient(135deg, rgb(186, 252, 230), rgb(142, 250, 216)) !important;
    border-color: #02ac73 !important;
    border-width: 3px !important;
    box-shadow: 0 4px 20px rgba(16, 185, 129, 0.25) !important;
}

.option-card.correct-answer .option-char {
    background: linear-gradient(135deg, #10b981, #059669) !important;
    box-shadow: 0 2px 8px rgba(16, 185, 129, 0.4) !important;
}

/* Ensure text remains readable on green background */
.option-card.correct-answer .text-gray-800 {
    color: #1f2937 !important;
    /* font-weight: 600 !important; */
}

/* Improved layout for long content with scroll adjustments */
#questionOptionsArea {
    transition: width 0.3s ease !important;
}

#imageArea {
    transition: width 0.3s ease !important;
}

/* Custom scrollbar for questionOptionsArea when overflow occurs */
#questionOptionsArea::-webkit-scrollbar {
    width: 8px;
}

#questionOptionsArea::-webkit-scrollbar-track {
    background: rgba(156, 163, 175, 0.2);
    border-radius: 4px;
}

#questionOptionsArea::-webkit-scrollbar-thumb {
    background: rgba(107, 114, 128, 0.5);
    border-radius: 4px;
}

#questionOptionsArea::-webkit-scrollbar-thumb:hover {
    background: rgba(107, 114, 128, 0.7);
}

/* 3-Column Layout Styles */
.three-columns-layout {
    display: grid !important;
    grid-template-columns: 2fr 1fr !important;
    gap: 2rem !important;
}

.three-columns-layout #questionOptionsArea {
    width: 100% !important;
    padding-right: 0 !important;
}

.three-columns-layout #imageArea {
    width: 100% !important;
    padding-left: 0 !important;
}

/* Single column layout for 3-column questions without images */
.three-columns-layout.single-column {
    grid-template-columns: 1fr !important;
}

#threeColumnsContainer {
    display: none;
}

#threeColumnsContainer.active {
    display: grid !important;
}

/* Column containers with background colors */
/* #column1Container {
    background: linear-gradient(135deg, rgba(239, 68, 68, 0.1), rgba(252, 165, 165, 0.1));
    border: 1px solid rgba(239, 68, 68, 0.2);
    border-radius: 0.75rem;
    padding: 1rem;
    box-shadow: 0 2px 8px rgba(239, 68, 68, 0.1);
}

#column2Container {
    background: linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(147, 197, 253, 0.1));
    border: 1px solid rgba(59, 130, 246, 0.2);
    border-radius: 0.75rem;
    padding: 1rem;
    box-shadow: 0 2px 8px rgba(59, 130, 246, 0.1);
} */

.column-header {
    font-size: 1.25rem;
    font-weight: 700;
    color: #1f2937;
    padding: 0.75rem 1rem;
    border-radius: 0.5rem;
    margin-bottom: 1rem;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    opacity: 0;
    transform: translateY(-10px);
    transition: all 0.5s ease-out;
}

/* Column header variants */
.column-header.errors {
    background: linear-gradient(135deg, rgba(239, 68, 68, 0.95), rgba(252, 165, 165, 0.95));
    border-left: 4px solid #ef4444;
}

.column-header.errors i {
    color: #ffffff;
    margin-right: 0.5rem;
}

.column-header.solutions {
    background: linear-gradient(135deg, rgba(59, 130, 246, 0.95), rgba(147, 197, 253, 0.95));
    border-left: 4px solid #3b82f6;
}

.column-header.solutions i {
    color: #ffffff;
    margin-right: 0.5rem;
}

/* Show header with animation */
.column-header.show {
    opacity: 1;
    transform: translateY(0);
}

/* Enhanced animations and effects for header and footer */
@keyframes shimmer {
    0% { background-position: -200% 0; }
    100% { background-position: 200% 0; }
}

@keyframes headerSlideDown {
    0% {
        transform: translateY(-100%);
        opacity: 0;
    }
    100% {
        transform: translateY(0);
        opacity: 1;
    }
}

@keyframes footerSlideUp {
    0% {
        transform: translateY(100%);
        opacity: 0;
    }
    100% {
        transform: translateY(0);
        opacity: 1;
    }
}

@keyframes fadeInScale {
    0% {
        opacity: 0;
        transform: scale(0.9);
    }
    100% {
        opacity: 1;
        transform: scale(1);
    }
}

@keyframes glowPulse {
    0%, 100% {
        box-shadow: 0 0 20px rgba(255, 255, 255, 0.1);
    }
    50% {
        box-shadow: 0 0 30px rgba(255, 255, 255, 0.2);
    }
}

/* Apply shimmer effect to all header/footer themes */
.header-footer-theme-default .header,
.header-footer-theme-default .footer,
.header-footer-theme-cspl .header,
.header-footer-theme-cspl .footer,
.header-footer-theme-pccc .header,
.header-footer-theme-pccc .footer,
.header-footer-theme-yte .header,
.header-footer-theme-yte .footer,
.header-footer-theme-ktm .header,
.header-footer-theme-ktm .footer,
.header-footer-theme-bq-bx-vc .header,
.header-footer-theme-bq-bx-vc .footer,
.header-footer-theme-vong1 .header,
.header-footer-theme-vong1 .footer,
.header-footer-theme-vong2 .header,
.header-footer-theme-vong2 .footer,
.header-footer-theme-vong3 .header,
.header-footer-theme-vong3 .footer {
    position: relative;
    overflow: hidden;
}

.header-footer-theme-default .header::before,
.header-footer-theme-default .footer::before,
.header-footer-theme-cspl .header::before,
.header-footer-theme-cspl .footer::before,
.header-footer-theme-pccc .header::before,
.header-footer-theme-pccc .footer::before,
.header-footer-theme-yte .header::before,
.header-footer-theme-yte .footer::before,
.header-footer-theme-ktm .header::before,
.header-footer-theme-ktm .footer::before,
.header-footer-theme-bq-bx-vc .header::before,
.header-footer-theme-bq-bx-vc .footer::before,
.header-footer-theme-vong1 .header::before,
.header-footer-theme-vong1 .footer::before,
.header-footer-theme-vong2 .header::before,
.header-footer-theme-vong2 .footer::before,
.header-footer-theme-vong3 .header::before,
.header-footer-theme-vong3 .footer::before {
    content: '';
    position: absolute;
    top: 0;
    left: -200%;
    width: 200%;
    height: 100%;
    background: linear-gradient(
        90deg,
        transparent,
        rgba(255, 255, 255, 0.1),
        rgba(255, 255, 255, 0.2),
        rgba(255, 255, 255, 0.1),
        transparent
    );
    animation: shimmer 3s infinite ease-in-out;
    z-index: 1;
    pointer-events: none;
}

/* Animated elements within header and footer */
.contest-info h1,
.contest-info p,
.question-number,
.category-badge,
.timer-circle,
.footer-left h3,
.footer-left p,
.footer-controls,
.footer-right .date,
.footer-right .location {
    animation: fadeInScale 1s ease-out;
    animation-fill-mode: both;
}

.contest-info h1 { animation-delay: 0.1s; }
.contest-info p { animation-delay: 0.2s; }
.question-number { animation-delay: 0.3s; }
.category-badge { animation-delay: 0.4s; }
.timer-circle { animation-delay: 0.5s; }

.footer-left h3 { animation-delay: 0.1s; }
.footer-left p { animation-delay: 0.2s; }
.footer-controls { animation-delay: 0.3s; }
.footer-right .date { animation-delay: 0.4s; }
.footer-right .location { animation-delay: 0.5s; }

/* Add glow effect on hover for interactive elements */
.footer-controls button:hover {
    animation: glowPulse 1.5s infinite;
}

.timer-circle:hover {
    animation: glowPulse 2s infinite, fadeInScale 1s ease-out;
}

@keyframes progressRainbow {
    0%, 100% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
}

@keyframes progressShimmer {
    0% { background-position: -200% 0; }
    100% { background-position: 200% 0; }
}

/* Custom Background Overlay Animations */
.slide-container::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: transparent;
    transform: translateY(-100%);
    transition: none;
    z-index: 1;
    pointer-events: none;
    opacity: 0;
}

.slide-container.overlay-curtain::before {
    opacity: 1;
    animation: curtainDrop 3s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
}

/* Gradient overlay curtain */
.slide-container.overlay-curtain.gradient::before {
    background: linear-gradient(180deg, rgba(0, 0, 0, 0.75), rgba(0, 0, 0, 0.51));
}

/* Stripes overlay curtain */
.slide-container.overlay-curtain.stripes::before {
    background: linear-gradient(45deg,
        rgba(245, 158, 11, 0.7) 0%,
        rgba(245, 158, 11, 0.7) 33.33%,
        rgba(255, 255, 255, 0.7) 33.33%,
        rgba(255, 255, 255, 0.7) 66.66%,
        rgba(245, 158, 11, 0.7) 66.66%,
        rgba(245, 158, 11, 0.7) 100%
    );
}

@keyframes curtainDrop {
    0% {
        transform: translateY(-100%);
    }
    20% {
        transform: translateY(-80%);
    }
    80% {
        transform: translateY(-5%);
    }
    100% {
        transform: translateY(0%);
    }
}

/* Question Number Counter Effect */
.question-number-counter {
    display: inline-block;
    perspective: 1000px;
}

.question-number-counter span {
    display: inline-block;
    transform-style: preserve-3d;
    transition: all 0.3s ease;
}

.question-number-counter.animate span {
    animation: counterGlow 2s cubic-bezier(0.68, -0.55, 0.265, 1.55) forwards;
}

@keyframes counterGlow {
    0% {
        transform: scale(0.8);
        opacity: 0.5;
        text-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
    }
    25% {
        transform: scale(1.2);
        opacity: 0.8;
        text-shadow: 0 0 20px rgba(255, 255, 255, 0.8);
    }
    50% {
        transform: scale(1.1);
        opacity: 0.9;
        text-shadow: 0 0 25px rgba(255, 255, 255, 1);
    }
    75% {
        transform: scale(1.05);
        opacity: 0.95;
        text-shadow: 0 0 15px rgba(255, 255, 255, 0.8);
    }
    100% {
        transform: scale(1);
        opacity: 1;
        text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.3);
    }
}

/* Category Badge Appear Effect */
.category-badge-appear {
    transform: scale(0) rotate(-180deg);
    opacity: 0;
    transform-origin: center;
    transition: all 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

.category-badge-appear.animate {
    animation: badgeAppear 1s cubic-bezier(0.68, -0.55, 0.265, 1.55) forwards;
}

@keyframes badgeAppear {
    0% {
        transform: scale(0) rotate(-180deg);
        opacity: 0;
    }
    30% {
        transform: scale(0.3) rotate(-120deg);
        opacity: 0.3;
    }
    60% {
        transform: scale(1.1) rotate(-30deg);
        opacity: 0.8;
    }
    80% {
        transform: scale(1.05) rotate(10deg);
        opacity: 0.95;
    }
    100% {
        transform: scale(1) rotate(0deg);
        opacity: 1;
    }
}

/* Timer Circle Delayed Appear Effect */
.timer-circle-delayed {
    opacity: 0;
    transform: scale(0.3);
    transition: all 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

.timer-circle-delayed.animate {
    animation: timerAppear 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55) forwards;
}

@keyframes timerAppear {
    0% {
        opacity: 0;
        transform: scale(0.3);
    }
    50% {
        opacity: 0.7;
        transform: scale(1.1);
    }
    100% {
        opacity: 1;
        transform: scale(1);
    }
}

/* Additional styling to prevent flash */
.question-header > * {
    backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
}

/* Question number scale and glow animation */
.question-number-scale {
    transform: scale(1);
    transition: all 0.3s ease-out;
}

.question-number-scale.animate {
    animation: questionNumberGlow 1.2s ease-out forwards;
}

@keyframes questionNumberGlow {
    0% {
        transform: scale(1);
        text-shadow: none;
        filter: brightness(1);
    }
    30% {
        transform: scale(1.3);
        text-shadow: 0 0 15px rgba(255, 255, 255, 0.8), 0 0 25px rgba(255, 255, 255, 0.6);
        filter: brightness(1.4);
    }
    60% {
        transform: scale(1.2);
        text-shadow: 0 0 20px rgba(255, 255, 255, 0.9), 0 0 30px rgba(255, 255, 255, 0.7);
        filter: brightness(1.5);
    }
    100% {
        transform: scale(1);
        text-shadow: 0 0 8px rgba(255, 255, 255, 0.4);
        filter: brightness(1.1);
    }
}

/* Start Timer Popup */
.start-timer-popup {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.6);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 9999;
    opacity: 0;
    transition: opacity 0.3s ease;
}

.start-timer-popup.show {
    opacity: 1;
}

.start-timer-content {
    background: linear-gradient(135deg, #059669, #10b981);
    color: white;
    padding: 3rem 4rem;
    border-radius: 1.5rem;
    text-align: center;
    box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
    transform: scale(0.8);
    transition: transform 0.3s ease;
    border: 3px solid rgba(255, 255, 255, 0.3);
    backdrop-filter: blur(10px);
    width: 20%;
    min-width: 300px;
    max-width: 400px;
}

.start-timer-popup.show .start-timer-content {
    transform: scale(1);
    animation: pulseGlow 0.8s ease-in-out;
}

.start-timer-content h2 {
    font-size: 3rem;
    font-weight: 800;
    margin: 0;
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
    animation: textPulse 1s ease-in-out infinite alternate;
}

.start-timer-content .icon {
    font-size: 2rem;
    margin-right: 1rem;
    animation: iconBounce 1s ease-in-out infinite;
}

@keyframes pulseGlow {
    0%, 100% { 
        box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
    }
    50% { 
        box-shadow: 0 25px 50px -12px rgba(5, 150, 105, 0.8), 0 0 30px rgba(16, 185, 129, 0.6);
    }
}



@keyframes textPulse {
    0% { opacity: 0.9; }
    100% { opacity: 1; }
}

@keyframes iconBounce {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-5px); }
}

/* Remove borders and shadows for transparent PNG images */
#imageWrapper {
    border: none !important;
    box-shadow: none !important;
    background: transparent !important;
}

#imageWrapper img {
    border: none !important;
    box-shadow: none !important;
    background: transparent !important;
}